{% extends 'base.html' %}
{% load static %}

{%include 'includes/navbar.html'%}

{%block content%}

<article class="content">
    <div class="card card-block">
        <div id="notify" class="alert alert-success" style="display:none;">
            <a href="#" class="close" data-dismiss="alert">&times;</a>

            <div class="message"></div>
        </div>
        <div class="grid_3 grid_4 animated fadeInRight table-responsive">
            <h5>Purchase Orders</h5>
            <a href= "{% url 'add_purchase_order' %}" class="btn btn-primary btn-sm rounded">
                Create A Purchase Order
            </a>
            <hr>

            <table id="invoices" class="table-striped" cellspacing="0" width="100%">
                <thead>
                <tr> 
                    <th>No</th>
                    <th>Order #</th>
                    <th>Supplier</th>
                    <th>Date</th>
                    <th>Amount (GHS)</th>
                    <th>Status</th>
                    <th class="no-sort">Settings</th>
                </tr>
                </thead>

                <tfoot>
                <tr> <th>No</th>
                    <th>Order #</th>
                    <th>Supplier</th>
                    <th>Date</th>
                    <th>Amount (GHS)</th>
                    <th>Status</th>
                    <th class="no-sort">Settings</th>
                </tr>
                </tfoot>
            </table>
        </div>
    </div>


</article>

<div id="delete_model" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Delete Order</h4>
            </div>
            <div class="modal-body">
                <p>delete this order</p>
            </div>
            <div class="modal-footer">
                <input type="hidden" id="object-id" value="">
                <input type="hidden" id="action-url" value="purchase/delete_i">
                <button type="button" data-dismiss="modal" class="btn btn-primary" id="delete-confirm">Delete</button>
                <button type="button" data-dismiss="modal" class="btn">Cancel</button>
            </div>
        </div>
    </div>
</div>

{%block scripts %}
    <script type="text/javascript">
        $(document).ready(function () {

            var table = $('#invoices').DataTable({
                "processing": true,
                "paging": true,
                "searching": true,
                "order": [],
                "scrollY":'400px',
                "scrollCollapse":true,
                "deferRender":true,

                "ajax": {
                    "type":'GET',
                    "url":"purchase_orders_data/",
                    "complete":function(){
                        console.log("Complete")
                    }
                },
                'columns':[
                    {data:"no"},
                    {data:'order number'},
                    {data:'supplier'},
                    {data:'date'},
                    {data:'amount'},
                    {data:'status'},
                    {"defaultContent":" <button type='button' class='btn btn-info' data-toggle='modal' data-target='#delete_model'> Edit </button>"},
                ],

                
                "columnDefs": [
                    {
                        "targets": [0],
                        "orderable": false,
                    },
                ],

            });

        });
    </script>
{%endblock scripts %}


{% endblock %}



{%include 'includes/footer.html' %}